****************
Analysis Example
****************

Example of a script for analyzing a corpus of sounds. It demonstrates the sequences of calls that are made in order to build the corpus.

To run
======

* Copy the example folder from the corpusdb folder to your user folder.
* cd to the directory containing this file. (``~/testcorpus``, or wherever you put it)
* run ``python analysis_example.py``

It will populate several folders with files generated by the analysis process. This is what the folder structure should look like pre-analysis.

Structure of a CorpusDB project dir
-----------------------------------

CorpusDB relies on the following directory structure and expects to find files in these particular places. If you are setting up your own corpus, you will need to create ``snd``, ``osc``, and ``json`` folders yourself in a folder as below.

::
	/snd/36047_dobroide.wav
	/snd/36818_cajo.wav
	/snd/...
	/osc/...
	/json/...
	...
	.sc file(s) - with Synthdefs
	.py file(s) - like this one

After analysis, there will be ``.osc`` files in the ``/osc`` directory. ``md`` directories will be created in the ``snd`` directory when needed to hold raw metadata files. The export-JSON function will use the json directory.


A really simple example
=======================

To run this code, you will need to change your

::
	anchorpath = '/Users/kfl/comp/supercollider/7.untitled'
	sndpath = os.path.join(anchorpath, 'snd')
	corpus = corpusdb.CorpusDB(anchorpath)

	f = os.path.join(anchorpath, 'snd', '2.wav')
	tval = 1
	node = corpus.add_sound_file(filename=os.path.basename(f), srcFileID=None, tratio=tval, sfGrpID=0)

	sfid = node.sfid
	print '2. sfid: ', sfid

	corpus.analyze_sound_file(os.path.basename(f), sfid, tratio=tval)
	powers, mfccs = corpus.get_raw_metadata(sfid)

	sfdur = (corpus.sftree.nodes[sfid].duration / tval)
	cut_list = findCutPoints2(sfid, mfcccs)

etc...
